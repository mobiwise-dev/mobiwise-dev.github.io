"use strict";(self.webpackChunkmobiwise_dev_github_io=self.webpackChunkmobiwise_dev_github_io||[]).push([[9797],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(n),m=a,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return n?r.createElement(f,l(l({ref:t},c),{},{components:n})):r.createElement(f,l({ref:t},c))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:a,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2201:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_position:1,tags:["Bridge"]},l="Bridge.addRecent",o={unversionedId:"Bridge/addRecent",id:"Bridge/addRecent",title:"Bridge.addRecent",description:"La fonction permet d'ajouter un \xe9l\xe9ment r\xe9cent dans la liste de fichiers ou de pages visit\xe9s r\xe9cemment.",source:"@site/docs/Bridge/addRecent.md",sourceDirName:"Bridge",slug:"/Bridge/addRecent",permalink:"/docs/Bridge/addRecent",draft:!1,tags:[{label:"Bridge",permalink:"/docs/tags/bridge"}],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,tags:["Bridge"]},sidebar:"docSidebar",previous:{title:"Bridge",permalink:"/docs/category/bridge"},next:{title:"Bridge.bind",permalink:"/docs/Bridge/bind"}},s={},p=[{value:"Exemple",id:"exemple",level:2},{value:"En r\xe9sum\xe9",id:"en-r\xe9sum\xe9",level:2}],c={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"bridgeaddrecent"},"Bridge.addRecent"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'function(a, b) {\n    if (a && a.path) {\n        var e = c._lastTopRecent;\n        if (e && a && e.path == a.path && e.mbrsite === a.mbrsite) {\n            var d = !0,\n                f;\n            for (f in a)\n                if (a[f] != e[f]) {\n                    d = !1;\n                    break\n                }\n            if (d) {\n                b(!0);\n                return\n            }\n        }\n        c._lastTopRecent = a;\n        c.getRecentsList(function(e) {\n            e = e || [];\n            for (var d = 0; d < e.length; d++)\n                if (e[d].path == a.path) {\n                    d = e.splice(d, 1)[0] || {};\n                    a.name = a.name || d.name;\n                    a.screenshot = a.screenshot || d.screenshot;\n                    break\n                }\n            e.unshift(a);\n            c.paranoicSaveLocal(c.dataLocation + "/" + c._recentsFile, JSON.stringify(e), function(a) {\n                a || console.error("Error: unable to update recent list");\n                b(a)\n            })\n        })\n    } else b && b(!1)\n}\n')),(0,a.kt)("p",null,"La fonction permet d'ajouter un \xe9l\xe9ment r\xe9cent dans la liste de fichiers ou de pages visit\xe9s r\xe9cemment."),(0,a.kt)("p",null,"Elle prend deux param\xe8tres : ",(0,a.kt)("inlineCode",{parentName:"p"},"a")," et ",(0,a.kt)("inlineCode",{parentName:"p"},"b"),"."),(0,a.kt)("p",null,"Le premier param\xe8tre, ",(0,a.kt)("inlineCode",{parentName:"p"},"a"),", repr\xe9sente l'\xe9l\xe9ment r\xe9cent \xe0 ajouter \xe0 la liste. Il doit \xeatre un objet JavaScript avec les propri\xe9t\xe9s suivantes :",(0,a.kt)("br",null)),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"path")," = chemin vers le fichier ou la page"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"name")," = nom de l'\xe9l\xe9ment r\xe9cent"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"screenshot")," = capture d'\xe9cran de l'\xe9l\xe9ment r\xe9cent"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"mbrsite")," = site web associ\xe9 \xe0 l'\xe9l\xe9ment r\xe9cent")),(0,a.kt)("p",null,"Le deuxi\xe8me param\xe8tre, ",(0,a.kt)("inlineCode",{parentName:"p"},"b"),", est une fonction de rappel qui sera appel\xe9e lorsque l'ajout sera termin\xe9. Cette fonction prend un seul argument, qui est un bool\xe9en indiquant si l'ajout a r\xe9ussi ou non."),(0,a.kt)("p",null,"Dans la fonction elle-m\xeame, la premi\xe8re chose que la fonction v\xe9rifie est si l'objet ",(0,a.kt)("inlineCode",{parentName:"p"},"a")," existe et poss\xe8de la propri\xe9t\xe9 ",(0,a.kt)("inlineCode",{parentName:"p"},"path"),". Si ce n'est pas le cas, la fonction de rappel ",(0,a.kt)("inlineCode",{parentName:"p"},"b")," est appel\xe9e avec ",(0,a.kt)("inlineCode",{parentName:"p"},"false")," comme argument."),(0,a.kt)("p",null,"Ensuite, la fonction r\xe9cup\xe8re l'\xe9l\xe9ment r\xe9cent le plus r\xe9cemment visit\xe9 enregistr\xe9 dans la propri\xe9t\xe9 ",(0,a.kt)("inlineCode",{parentName:"p"},"\\_lastTopRecent")," de l'objet ",(0,a.kt)("inlineCode",{parentName:"p"},"c"),". Si cet \xe9l\xe9ment est identique \xe0 celui que l'on souhaite ajouter, la fonction de rappel ",(0,a.kt)("inlineCode",{parentName:"p"},"b")," est appel\xe9e avec ",(0,a.kt)("inlineCode",{parentName:"p"},"true")," comme argument (l'\xe9l\xe9ment n'est pas ajout\xe9 car il est d\xe9j\xe0 le plus r\xe9cent)."),(0,a.kt)("p",null,"Si l'\xe9l\xe9ment r\xe9cent n'est pas d\xe9j\xe0 le plus r\xe9cent, la propri\xe9t\xe9 ",(0,a.kt)("inlineCode",{parentName:"p"},"\\_lastTopRecent")," est mise \xe0 jour avec l'objet ",(0,a.kt)("inlineCode",{parentName:"p"},"a"),"."),(0,a.kt)("p",null,"La fonction ",(0,a.kt)("inlineCode",{parentName:"p"},"getRecentsList")," est appel\xe9e pour r\xe9cup\xe9rer la liste des \xe9l\xe9ments r\xe9cents enregistr\xe9e localement. Si la liste n'existe pas encore, une liste vide est retourn\xe9e. La liste des \xe9l\xe9ments r\xe9cents est ensuite parcourue pour trouver l'\xe9l\xe9ment avec le m\xeame ",(0,a.kt)("inlineCode",{parentName:"p"},"path")," que celui que l'on souhaite ajouter. Si cet \xe9l\xe9ment existe d\xe9j\xe0 dans la liste, il est supprim\xe9 et remplac\xe9 par l'\xe9l\xe9ment que l'on souhaite ajouter. Sinon, l'\xe9l\xe9ment que l'on souhaite ajouter est simplement ajout\xe9 en haut de la liste."),(0,a.kt)("p",null,"Enfin, la liste mise \xe0 jour est enregistr\xe9e localement en utilisant la m\xe9thode ",(0,a.kt)("inlineCode",{parentName:"p"},"paranoicSaveLocal"),". La fonction de rappel ",(0,a.kt)("inlineCode",{parentName:"p"},"b")," est appel\xe9e avec un bool\xe9en indiquant si l'ajout a r\xe9ussi ou non."),(0,a.kt)("h2",{id:"exemple"},"Exemple"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'Bridge.addRecent(recentPage, function (success) {\n  if (success) {\n    alert("Recently added item successfully!");\n  } else {\n    alert("Unable to add the recent item.");\n  }\n});\n')),(0,a.kt)("h2",{id:"en-r\xe9sum\xe9"},"En r\xe9sum\xe9"),(0,a.kt)("p",null,"La fonction ",(0,a.kt)("inlineCode",{parentName:"p"},"Bridge.addRecent")," permet d'ajouter un \xe9l\xe9ment r\xe9cent \xe0 la liste de fichiers ou de pages visit\xe9s r\xe9cemment, et de sauvegarder cette liste localement."))}u.isMDXComponent=!0}}]);